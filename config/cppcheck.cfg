# =============================================================================
# CPPCHECK CONFIGURATION - Static Analysis for Embedded C
# =============================================================================
# Based on MISRA-C:2012 and Engineer/JPL Coding Standards
#
# Usage: cppcheck --project=platformio.ini --cppcheck-build-dir=.pio/cppcheck
#    or: cppcheck --library=avr --platform=avr8 src/
# =============================================================================

# Enable all checks
--enable=all

# Use C99 standard (matching platformio.ini)
--std=c99

# Target platform: 8-bit AVR
--platform=avr8

# Suppress system header warnings (we can't fix those)
--suppress=missingIncludeSystem

# Suppress "variable assigned but not used" for hardware registers
# (reading/writing hardware registers has side effects)
--suppress=unreadVariable:*hal*.h

# Suppress inline function "not used" warnings
# (header-only libraries will show these)
--suppress=unusedFunction

# Enable MISRA-C:2012 checking (requires MISRA addon)
# --addon=misra

# Limit analysis to reasonable depth
--max-configs=12

# Output format for CI integration
--template='{file}:{line}: {severity}: {message} [{id}]'

# Force checking even if includes are missing
--force

# Include paths
-Isrc/hal
-Isrc/hdc
-Isrc/app
